<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Security Reports - Command Center</title>
    <!-- Tailwind CSS - CDN for reliability -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="/static/css/styles.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#137fec",
                        "background-dark": "#0b0e14",
                        "surface-dark": "#161b22",
                        "neon-red": "#ff4d4d",
                        "neon-amber": "#ffb000",
                        "neon-green": "#00ff9d",
                        "neon-blue": "#2f81f7"
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                },
            },
        }
    </script>
    <style>
        body {
            background-color: #0b0e14; /* Fallback for dark mode */
            color: white;
        }
    </style>
</head>

<body class="text-slate-100 min-h-screen font-display selection:bg-neon-blue selection:text-white overflow-x-hidden">
    
    <!-- Floating Header -->
    <header class="fixed top-4 left-4 right-4 z-50 glass-panel rounded-xl px-6 py-3 flex items-center justify-between">
        <div class="flex items-center gap-8">
            <div class="flex items-center gap-3">
                <div class="size-8 bg-neon-amber/20 rounded-lg flex items-center justify-center text-neon-amber border border-neon-amber/30 shadow-[0_0_15px_rgba(255,176,0,0.3)]">
                    <span class="material-symbols-outlined">shield_with_heart</span>
                </div>
                <h1 class="text-lg font-bold tracking-tight text-white text-glow-amber">VibeCraft<span class="text-slate-500 font-normal">Security</span></h1>
            </div>
            <nav class="hidden md:flex items-center gap-1 bg-white/5 rounded-lg p-1 border border-white/5">
                <a class="px-4 py-1.5 rounded-md text-slate-400 hover:text-white hover:bg-white/5 transition-all text-xs font-medium" href="/">Dashboard</a>
                <a class="px-4 py-1.5 rounded-md text-slate-400 hover:text-white hover:bg-white/5 transition-all text-xs font-medium" href="/alerts.html">Alerts</a>
                <a class="px-4 py-1.5 rounded-md text-slate-400 hover:text-white hover:bg-white/5 transition-all text-xs font-medium" href="/mitigations.html">Mitigations</a>
                <a class="px-4 py-1.5 rounded-md text-slate-400 hover:text-white hover:bg-white/5 transition-all text-xs font-medium" href="/assets.html">Assets</a>
                <a class="px-4 py-1.5 rounded-md bg-neon-amber/20 text-white text-xs font-bold shadow-[0_0_10px_rgba(255,176,0,0.2)]" href="/reports.html">Reports</a>
                <a class="px-4 py-1.5 rounded-md text-slate-400 hover:text-white hover:bg-white/5 transition-all text-xs font-medium" href="/users.html">Instances</a>
                <a class="px-4 py-1.5 rounded-md text-slate-400 hover:text-white hover:bg-white/5 transition-all text-xs font-medium" href="/models.html">ML Models</a>
            </nav>
        </div>
    </header>

    <main class="pt-24 px-6 pb-20 max-w-[1600px] mx-auto space-y-8">
        <div class="mb-6 flex flex-col">
            <h1 class="text-3xl font-bold mb-2 text-white text-glow-amber">ðŸ“Š Security Analytics & Reports</h1>
            <p class="text-slate-400">Comprehensive threat intelligence and performance metrics</p>
        </div>

        <!-- Summary Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
            <div class="glass-panel spotlight-card rounded-xl p-6 relative overflow-hidden group">
                <div class="absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-neon-green to-transparent opacity-50"></div>
                <div class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-2">Threats Blocked (24h)</div>
                <div class="text-3xl font-bold text-neon-green text-glow-green" id="blocked-24h">0</div>
                <div class="text-[10px] text-neon-green bg-neon-green/10 px-2 py-0.5 rounded-full w-fit mt-3 border border-neon-green/20">
                    <span class="font-bold">â†‘ 15%</span> from yesterday
                </div>
            </div>
            <div class="glass-panel spotlight-card rounded-xl p-6 relative overflow-hidden group">
                 <div class="absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-primary to-transparent opacity-50"></div>
                <div class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-2">Detection Accuracy</div>
                <div class="text-3xl font-bold text-primary text-glow-blue">94.8%</div>
                <div class="text-xs text-slate-500 mt-3 flex items-center gap-1">
                    <span class="material-symbols-outlined text-sm text-primary">auto_fix_high</span>
                    AI models performing optimally
                </div>
            </div>
            <div class="glass-panel spotlight-card rounded-xl p-6 relative overflow-hidden group">
                 <div class="absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-neon-amber to-transparent opacity-50"></div>
                <div class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-2">Avg Response Time</div>
                <div class="text-3xl font-bold text-neon-amber text-glow-amber">42ms</div>
                <div class="text-xs text-slate-500 mt-3 flex items-center gap-1">
                    <span class="material-symbols-outlined text-sm text-neon-amber">bolt</span>
                    Real-time threat detection
                </div>
            </div>
            <div class="glass-panel spotlight-card rounded-xl p-6 relative overflow-hidden group">
                 <div class="absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-neon-red to-transparent opacity-50"></div>
                <div class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-2">False Positives</div>
                <div class="text-3xl font-bold text-neon-red text-glow-red">2.1%</div>
                <div class="text-xs text-slate-500 mt-3 flex items-center gap-1">
                    <span class="material-symbols-outlined text-sm text-neon-red">check_circle</span>
                    Industry leading rate
                </div>
            </div>
        </div>

        <!-- Charts Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Threat Distribution -->
            <div class="glass-panel spotlight-card rounded-xl p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-lg font-bold text-white flex items-center gap-2">
                        <span class="material-symbols-outlined text-neon-amber">pie_chart</span>
                        Threat Type Distribution
                    </h2>
                     <button class="text-xs text-slate-400 hover:text-white transition-colors">View Details</button>
                </div>
                <div class="space-y-5">
                    <div class="group">
                        <div class="flex justify-between text-xs font-bold uppercase tracking-wider mb-2">
                            <span class="text-white group-hover:text-neon-red transition-colors">DoS Attacks</span>
                            <span class="text-neon-red">42%</span>
                        </div>
                        <div class="w-full bg-white/5 h-2 rounded-full overflow-hidden shadow-inner">
                            <div class="bg-neon-red h-full rounded-full shadow-[0_0_10px_rgba(255,77,77,0.5)]" style="width: 42%"></div>
                        </div>
                    </div>
                    <div class="group">
                        <div class="flex justify-between text-xs font-bold uppercase tracking-wider mb-2">
                            <span class="text-white group-hover:text-neon-amber transition-colors">Exploits</span>
                            <span class="text-neon-amber">28%</span>
                        </div>
                        <div class="w-full bg-white/5 h-2 rounded-full overflow-hidden shadow-inner">
                            <div class="bg-neon-amber h-full rounded-full shadow-[0_0_10px_rgba(255,176,0,0.5)]" style="width: 28%"></div>
                        </div>
                    </div>
                    <div class="group">
                        <div class="flex justify-between text-xs font-bold uppercase tracking-wider mb-2">
                            <span class="text-white group-hover:text-primary transition-colors">Reconnaissance</span>
                            <span class="text-primary">18%</span>
                        </div>
                        <div class="w-full bg-white/5 h-2 rounded-full overflow-hidden shadow-inner">
                            <div class="bg-primary h-full rounded-full shadow-[0_0_10px_rgba(19,127,236,0.5)]" style="width: 18%"></div>
                        </div>
                    </div>
                    <div class="group">
                        <div class="flex justify-between text-xs font-bold uppercase tracking-wider mb-2">
                            <span class="text-white group-hover:text-neon-green transition-colors">Backdoor Attempts</span>
                            <span class="text-neon-green">8%</span>
                        </div>
                        <div class="w-full bg-white/5 h-2 rounded-full overflow-hidden shadow-inner">
                            <div class="bg-neon-green h-full rounded-full shadow-[0_0_10px_rgba(0,255,157,0.5)]" style="width: 8%"></div>
                        </div>
                    </div>
                    <div class="group">
                        <div class="flex justify-between text-xs font-bold uppercase tracking-wider mb-2">
                            <span class="text-slate-500 group-hover:text-slate-300 transition-colors">Other</span>
                            <span class="text-slate-400">4%</span>
                        </div>
                        <div class="w-full bg-white/5 h-2 rounded-full overflow-hidden shadow-inner">
                            <div class="bg-slate-400 h-full rounded-full" style="width: 4%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Geographic Distribution -->
            <div class="glass-panel spotlight-card rounded-xl p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-lg font-bold text-white flex items-center gap-2">
                        <span class="material-symbols-outlined text-primary">public</span>
                        Top Attack Origins
                    </h2>
                     <button class="text-xs text-slate-400 hover:text-white transition-colors">Global Map</button>
                </div>
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-3 rounded-lg hover:bg-white/5 transition-colors group border border-transparent hover:border-white/5">
                        <div class="flex items-center gap-4">
                            <div
                                class="size-10 bg-neon-red/10 rounded-lg flex items-center justify-center text-neon-red font-bold border border-neon-red/20 shadow-[0_0_10px_rgba(255,77,77,0.2)]">
                                RU</div>
                            <div>
                                <div class="font-bold text-sm text-white">Russia</div>
                                <div class="text-[10px] text-slate-500 uppercase tracking-wider">Moscow, St Petersburg</div>
                            </div>
                        </div>
                        <div class="text-neon-red font-bold font-mono">38%</div>
                    </div>
                    <div class="flex items-center justify-between p-3 rounded-lg hover:bg-white/5 transition-colors group border border-transparent hover:border-white/5">
                        <div class="flex items-center gap-4">
                            <div
                                class="size-10 bg-neon-amber/10 rounded-lg flex items-center justify-center text-neon-amber font-bold border border-neon-amber/20 shadow-[0_0_10px_rgba(255,176,0,0.2)]">
                                CN</div>
                            <div>
                                <div class="font-bold text-sm text-white">China</div>
                                <div class="text-[10px] text-slate-500 uppercase tracking-wider">Beijing, Shanghai</div>
                            </div>
                        </div>
                        <div class="text-neon-amber font-bold font-mono">24%</div>
                    </div>
                    <div class="flex items-center justify-between p-3 rounded-lg hover:bg-white/5 transition-colors group border border-transparent hover:border-white/5">
                        <div class="flex items-center gap-4">
                            <div
                                class="size-10 bg-primary/10 rounded-lg flex items-center justify-center text-primary font-bold border border-primary/20 shadow-[0_0_10px_rgba(19,127,236,0.2)]">
                                US</div>
                            <div>
                                <div class="font-bold text-sm text-white">United States</div>
                                <div class="text-[10px] text-slate-500 uppercase tracking-wider">Various compromised hosts</div>
                            </div>
                        </div>
                        <div class="text-primary font-bold font-mono">16%</div>
                    </div>
                    <div class="flex items-center justify-between p-3 rounded-lg hover:bg-white/5 transition-colors group border border-transparent hover:border-white/5">
                        <div class="flex items-center gap-4">
                            <div
                                class="size-10 bg-neon-green/10 rounded-lg flex items-center justify-center text-neon-green font-bold border border-neon-green/20 shadow-[0_0_10px_rgba(0,255,157,0.2)]">
                                BR</div>
                            <div>
                                <div class="font-bold text-sm text-white">Brazil</div>
                                <div class="text-[10px] text-slate-500 uppercase tracking-wider">SÃ£o Paulo, Rio</div>
                            </div>
                        </div>
                        <div class="text-neon-green font-bold font-mono">12%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Activity Timeline -->
        <div class="glass-panel spotlight-card rounded-xl p-8">
            <h2 class="text-lg font-bold mb-8 text-white flex items-center gap-2">
                 <span class="material-symbols-outlined text-neon-blue">moving</span>
                Last 7 Days Activity
            </h2>
            <div class="h-64 flex items-end justify-between gap-4 px-4">
                <div class="flex-1 flex flex-col items-center gap-3 group">
                    <div class="w-full bg-white/5 group-hover:bg-primary/20 transition-all duration-500 rounded-t-lg relative overflow-hidden" style="height: 45%">
                        <div class="absolute bottom-0 inset-x-0 h-1 bg-primary shadow-[0_0_10px_rgba(19,127,236,0.5)]"></div>
                    </div>
                    <span class="text-xs text-slate-500 font-bold uppercase tracking-wider">Mon</span>
                </div>
                <div class="flex-1 flex flex-col items-center gap-3 group">
                    <div class="w-full bg-white/5 group-hover:bg-primary/20 transition-all duration-500 rounded-t-lg relative overflow-hidden" style="height: 62%">
                         <div class="absolute bottom-0 inset-x-0 h-1 bg-primary shadow-[0_0_10px_rgba(19,127,236,0.5)]"></div>
                    </div>
                    <span class="text-xs text-slate-500 font-bold uppercase tracking-wider">Tue</span>
                </div>
                <div class="flex-1 flex flex-col items-center gap-3 group">
                    <div class="w-full bg-white/5 group-hover:bg-primary/20 transition-all duration-500 rounded-t-lg relative overflow-hidden" style="height: 38%">
                         <div class="absolute bottom-0 inset-x-0 h-1 bg-primary shadow-[0_0_10px_rgba(19,127,236,0.5)]"></div>
                    </div>
                    <span class="text-xs text-slate-500 font-bold uppercase tracking-wider">Wed</span>
                </div>
                <div class="flex-1 flex flex-col items-center gap-3 group">
                    <div class="w-full bg-white/5 group-hover:bg-primary/20 transition-all duration-500 rounded-t-lg relative overflow-hidden" style="height: 78%">
                         <div class="absolute bottom-0 inset-x-0 h-1 bg-primary shadow-[0_0_10px_rgba(19,127,236,0.5)]"></div>
                    </div>
                    <span class="text-xs text-slate-500 font-bold uppercase tracking-wider">Thu</span>
                </div>
                <div class="flex-1 flex flex-col items-center gap-3 group">
                    <div class="w-full bg-white/5 group-hover:bg-primary/20 transition-all duration-500 rounded-t-lg relative overflow-hidden" style="height: 54%">
                         <div class="absolute bottom-0 inset-x-0 h-1 bg-primary shadow-[0_0_10px_rgba(19,127,236,0.5)]"></div>
                    </div>
                    <span class="text-xs text-slate-500 font-bold uppercase tracking-wider">Fri</span>
                </div>
                <div class="flex-1 flex flex-col items-center gap-3 group">
                    <div class="w-full bg-white/5 group-hover:bg-primary/20 transition-all duration-500 rounded-t-lg relative overflow-hidden" style="height: 88%">
                         <div class="absolute bottom-0 inset-x-0 h-1 bg-primary shadow-[0_0_10px_rgba(19,127,236,0.5)]"></div>
                    </div>
                    <span class="text-xs text-slate-500 font-bold uppercase tracking-wider">Sat</span>
                </div>
                <div class="flex-1 flex flex-col items-center gap-3 group">
                    <div class="w-full bg-gradient-to-t from-neon-green/20 to-neon-green/5 rounded-t-lg relative overflow-hidden shadow-[0_0_20px_rgba(0,255,157,0.1)]" style="height: 100%">
                        <div class="absolute top-0 inset-x-0 h-full bg-gradient-to-b from-transparent to-neon-green/10"></div>
                        <div class="absolute bottom-0 inset-x-0 h-1 bg-neon-green shadow-[0_0_15px_rgba(0,255,157,0.8)] animate-pulse"></div>
                    </div>
                    <span class="text-xs text-neon-green font-bold uppercase tracking-wider">Today</span>
                </div>
            </div>
            <div class="mt-8 text-center bg-white/5 py-3 rounded-lg border border-white/5">
                <p class="text-xs text-slate-400">Peak activity detected on weekends <span class="mx-2 text-white/20">|</span> Average: <span class="text-white font-bold">1,284 threats/day</span></p>
            </div>
        </div>
    </main>

    <script src="/static/js/ui.js"></script>
    <script>
        const API_BASE = window.location.origin;

        async function updateReportStats() {
            try {
                const response = await fetch(`${API_BASE}/api/logs/threat?lines=100`);
                const data = await response.json();

                if (data.entries) {
                    animateValue('blocked-24h', parseInt(document.getElementById('blocked-24h').textContent), data.entries.length, 500);
                }
            } catch (error) {
                console.error('Error updating reports:', error);
            }
        }

        function animateValue(id, start, end, duration) {
            if (start === end) return;
             const obj = document.getElementById(id);
            if (!obj) return;
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        // Auto-refresh every 5 seconds
        setInterval(updateReportStats, 5000);
        updateReportStats();
    </script>
</body>

</html>